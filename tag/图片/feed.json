{
    "version": "https://jsonfeed.org/version/1",
    "title": "PyQt • All posts by \"图片\" tag",
    "description": "Python PyQt PyQt6 PyQt5 PyQt4 PySide PySide2 PySide6",
    "home_page_url": "https://pyqt5.com",
    "items": [
        {
            "id": "https://pyqt5.com/qtninepatch.html",
            "url": "https://pyqt5.com/qtninepatch.html",
            "title": "PyQt5显示.9格式的PNG图片",
            "date_published": "2018-10-26T02:00:08.000Z",
            "content_html": "<p>做过安卓开发的和使用过 QQ 的都知道 <code>.9.png</code>  这种图片格式，效果就如 QQ 的聊天气泡一样可以拉伸，这种格式的图片允许开发人员定义可扩展区域，当需要延伸图片以填充比图片本身更大区域时，可扩展区的内容被延展；允许开发人员定义内容显示区，用于显示文字或其他内容。目前在 <code>Github</code>  上有两个 C++ 版本的，在这里我把它们都用 Python 实现了一遍。另外一个我也为 <code>PyQt</code>  提供了编译好的 pyd 文件。</p>\n<span id=\"more\"></span>\n<h2 id=\"c版本\"><a class=\"markdownIt-Anchor\" href=\"#c版本\">#</a> C++ 版本</h2>\n<p>在 Github 开源库中搜索到两个 C++ 版本的</p>\n<ol>\n<li>一个是 <a href=\"https://github.com/Roninsc2/NinePatchQt\">NinePatchQt</a></li>\n<li>一个是 <a href=\"https://github.com/soramimi/QtNinePatch\">QtNinePatch</a></li>\n</ol>\n<h2 id=\"pyqt5版本\"><a class=\"markdownIt-Anchor\" href=\"#pyqt5版本\">#</a> PyQt5 版本</h2>\n<p>这里也分为两个版本，都是基于上面的 C++ 源码翻译改写过来的，具体的例子见项目里面的测试代码吧。</p>\n<ol>\n<li><a href=\"https://github.com/PyQt5/PyQt/blob/master/QLabel/QtNinePatch.py\">QtNinePatch</a> 是参考第一个源码编写，用法是在 <code>paintEvent</code>  中调用</li>\n<li><a href=\"https://github.com/PyQt5/PyQt/blob/master/QLabel/QtNinePatch2.py\">QtNinePatch2</a> 是参考第二个源码编写，用法是 <code>pixmap = QtNinePatch.createPixmapFromNinePatchImage(self.image, self.width(), self.height())</code>  直接得到一个处理好的 <code>QPixmap</code>  对象来使用</li>\n</ol>\n<h2 id=\"说明\"><a class=\"markdownIt-Anchor\" href=\"#说明\">#</a> 说明</h2>\n<ol>\n<li>建议优先使用 pyd 版本的（后续提供 Python3.4 3.5 3.6 3.7 编译好的 32 为库文件），也可以自行编译，编译步骤见下文。</li>\n<li>其次可以使用纯 python 版本 2 的（个人觉得方便调用）</li>\n<li>最后再考虑纯 python 版本 1 的吧</li>\n<li>以上为个人意见，两个 C++ 版本的写法不一样，但是核心算法应该是类似的。</li>\n</ol>\n<h2 id=\"自行编译\"><a class=\"markdownIt-Anchor\" href=\"#自行编译\">#</a> 自行编译</h2>\n<ol>\n<li>首先要安装好 Qt、PyQt5、编译安装对应的 sip、对应的 VC++ 编译工具</li>\n<li>用 Qt Creator 打开 pro 文件进行编译</li>\n<li>进入源码中的 sip 文件夹修改 configure.py 文件</li>\n</ol>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\"># 这里是你的VC版本和对应的Qt目录中的文件夹\nconfig.platform &#x3D; &quot;win32-msvc2010&quot;\nqt_path &#x3D; &#39;D:&#x2F;soft&#x2F;Qt&#x2F;Qt5.5.1&#x2F;5.5&#x2F;msvc2010&#39;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<ol start=\"4\">\n<li>最后执行 python configure.py 来编译</li>\n</ol>\n<h2 id=\"下载\"><a class=\"markdownIt-Anchor\" href=\"#下载\">#</a> 下载</h2>\n<p><a href=\"https://github.com/PyQt5/PyQt/tree/master/QLabel\">https://github.com/PyQt5/PyQt/tree/master/QLabel</a></p>\n<h2 id=\"效果图\"><a class=\"markdownIt-Anchor\" href=\"#效果图\">#</a> 效果图</h2>\n<p><img src=\"/PyQt/QLabel/ScreenShot/NinePatchImage.gif\" alt=\"NinePatchImage\"></p>\n",
            "tags": [
                "PyQt",
                "图片",
                "气泡",
                ".9png"
            ]
        },
        {
            "id": "https://pyqt5.com/circleimage.html",
            "url": "https://pyqt5.com/circleimage.html",
            "title": "PyQt5圆形图片",
            "date_published": "2018-09-25T14:13:26.000Z",
            "content_html": "<p>实现圆形图片的方法有很多，比如用遮罩（mask）, 裁切等等。这里比较几种实现方式，选出个人认为最优的方案。</p>\n<span id=\"more\"></span>\n<p><a href=\"https://github.com/PyQt5/PyQt/blob/master/QLabel/CircleImage.py\">https://github.com/PyQt5/PyQt/blob/master/QLabel/CircleImage.py</a></p>\n<h2 id=\"采用mask方式\"><a class=\"markdownIt-Anchor\" href=\"#采用mask方式\">#</a> 采用 mask 方式</h2>\n<p>具体参考 <a href=\"https://www.cnblogs.com/zhehan54/p/9515124.html\">【Qt】QLabel 实现的圆形图像 - 米罗西 - 博客园</a></p>\n<h2 id=\"画圆形遮盖适合纯色背景\"><a class=\"markdownIt-Anchor\" href=\"#画圆形遮盖适合纯色背景\">#</a> 画圆形遮盖（适合纯色背景）</h2>\n<p>原理是在原图片上画一个 4 角有颜色，中间圆形镂空的图片。</p>\n<p><img src=\"/images/circleimage1.png\" alt=\"circleimage1\"></p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token comment\">#!/usr/bin/env python</span>\n<span class=\"token comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"token triple-quoted-string string\">'''\nCreated on 2017年8月25日\n@author: Irony.\"[讽刺]\n@site: https://pyqt5.com, https://github.com/892768447\n@email: 892768447@qq.com\n@description: \n'''</span>\n<span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtCore <span class=\"token keyword\">import</span> Qt\n<span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtGui <span class=\"token keyword\">import</span> QPixmap<span class=\"token punctuation\">,</span> QPainter<span class=\"token punctuation\">,</span> QPainterPath\n<span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtWidgets <span class=\"token keyword\">import</span> QLabel<span class=\"token punctuation\">,</span> QWidget<span class=\"token punctuation\">,</span> QHBoxLayout\n\n\n__Author__ <span class=\"token operator\">=</span> <span class=\"token string\">\"By: Irony.\\\"[讽刺]\\nQQ: 892768447\\nEmail: 892768447@qq.com\"</span>\n__Copyright__ <span class=\"token operator\">=</span> <span class=\"token string\">\"Copyright (c) 2017 Irony.\\\"[讽刺]\"</span>\n__Version__ <span class=\"token operator\">=</span> <span class=\"token string\">\"Version 1.0\"</span>\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Label</span><span class=\"token punctuation\">(</span>QLabel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> antialiasing<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span>Label<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__init__<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>Antialiasing <span class=\"token operator\">=</span> antialiasing\n        self<span class=\"token punctuation\">.</span>setMaximumSize<span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>setMinimumSize<span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>radius <span class=\"token operator\">=</span> <span class=\"token number\">100</span>\n\n        <span class=\"token comment\">#加载图片并缩放</span>\n        self<span class=\"token punctuation\">.</span>image <span class=\"token operator\">=</span> QPixmap<span class=\"token punctuation\">(</span><span class=\"token string\">\"head.jpg\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>scaled<span class=\"token punctuation\">(</span>\n            <span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span> Qt<span class=\"token punctuation\">.</span>KeepAspectRatioByExpanding<span class=\"token punctuation\">,</span> Qt<span class=\"token punctuation\">.</span>SmoothTransformation<span class=\"token punctuation\">)</span>\n\n        painter <span class=\"token operator\">=</span> QPainter<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>image<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> self<span class=\"token punctuation\">.</span>Antialiasing<span class=\"token punctuation\">:</span>\n            painter<span class=\"token punctuation\">.</span>setRenderHint<span class=\"token punctuation\">(</span>QPainter<span class=\"token punctuation\">.</span>Antialiasing<span class=\"token punctuation\">,</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n            painter<span class=\"token punctuation\">.</span>setRenderHint<span class=\"token punctuation\">(</span>QPainter<span class=\"token punctuation\">.</span>HighQualityAntialiasing<span class=\"token punctuation\">,</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n            painter<span class=\"token punctuation\">.</span>setRenderHint<span class=\"token punctuation\">(</span>QPainter<span class=\"token punctuation\">.</span>SmoothPixmapTransform<span class=\"token punctuation\">,</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n\n        path <span class=\"token operator\">=</span> QPainterPath<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        path<span class=\"token punctuation\">.</span>addRoundedRect<span class=\"token punctuation\">(</span>\n            <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>radius<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>radius<span class=\"token punctuation\">)</span>\n        path<span class=\"token punctuation\">.</span>addRect<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>self<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>self<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        painter<span class=\"token punctuation\">.</span>setPen<span class=\"token punctuation\">(</span>Qt<span class=\"token punctuation\">.</span>NoPen<span class=\"token punctuation\">)</span>\n        painter<span class=\"token punctuation\">.</span>setBrush<span class=\"token punctuation\">(</span>Qt<span class=\"token punctuation\">.</span>green<span class=\"token punctuation\">)</span>\n        painter<span class=\"token punctuation\">.</span>drawPath<span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>setPixmap<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>image<span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Window</span><span class=\"token punctuation\">(</span>QWidget<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span>Window<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__init__<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span>\n        layout <span class=\"token operator\">=</span> QHBoxLayout<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span>\n        layout<span class=\"token punctuation\">.</span>addWidget<span class=\"token punctuation\">(</span>Label<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        layout<span class=\"token punctuation\">.</span>addWidget<span class=\"token punctuation\">(</span>Label<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> antialiasing<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>setStyleSheet<span class=\"token punctuation\">(</span><span class=\"token string\">\"background: black;\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">\"__main__\"</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">import</span> sys\n    <span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtWidgets <span class=\"token keyword\">import</span> QApplication\n    app <span class=\"token operator\">=</span> QApplication<span class=\"token punctuation\">(</span>sys<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">)</span>\n    w <span class=\"token operator\">=</span> Window<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    w<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    sys<span class=\"token punctuation\">.</span>exit<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>exec_<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"使用qpainter的setcompositionmode\"><a class=\"markdownIt-Anchor\" href=\"#使用qpainter的setcompositionmode\">#</a> 使用 QPainter 的 setCompositionMode</h2>\n<p>具体参考 <a href=\"https://qtdream.com/topic/911/qt-%E5%9C%86%E5%BD%A2%E5%A4%B4%E5%83%8F%E5%88%B6%E4%BD%9C%E5%B7%A5%E5%85%B7-%E6%8A%97%E9%94%AF%E9%BD%BF-%E5%8F%AF%E7%BC%A9%E6%94%BE%E7%BC%96%E8%BE%91\">Qt 圆形头像制作工具 抗锯齿 可缩放编辑</a></p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">&#x2F;&#x2F;result_avatar_size 是我们最后生成的图片的长宽，可以是QSize(200, 200)的正圆\ndestination_image &#x3D; QImage(result_avatar_size, QImage::Format_ARGB32_Premultiplied);\n&#x2F;&#x2F;在黑色的正方形中间画一个透明的圆，作为头像遮罩\nQPainter painter(&amp;destination_image);\npainter.setRenderHint(QPainter::Antialiasing);\n&#x2F;&#x2F;全涂黑\npainter.fillRect(destination_image.rect(), QBrush(Qt::black, Qt::SolidPattern));\npainter.setCompositionMode(QPainter::CompositionMode_SourceOut);\npainter.setPen(Qt::NoPen);\npainter.setBrush(QBrush(Qt::transparent, Qt::SolidPattern));\n&#x2F;&#x2F;画透明区域\npainter.drawEllipse(destination_image.rect());<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"使用qpainter的切割方法推荐\"><a class=\"markdownIt-Anchor\" href=\"#使用qpainter的切割方法推荐\">#</a> 使用 QPainter 的切割方法（推荐）</h2>\n<p>利用 <code>QPainter.setClipPath</code>  方法切割一个圆形的 <code>QPainterPath</code></p>\n<p><img src=\"/images/circleimage2.png\" alt=\"circleimage2\"></p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token comment\">#!/usr/bin/env python</span>\n<span class=\"token comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"token triple-quoted-string string\">'''\nCreated on 2017年8月25日\n@author: Irony.\"[讽刺]\n@site: https://pyqt5.com, https://github.com/892768447\n@email: 892768447@qq.com\n@file: \n@description: \n'''</span>\n<span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtCore <span class=\"token keyword\">import</span> Qt\n<span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtGui <span class=\"token keyword\">import</span> QPixmap<span class=\"token punctuation\">,</span> QPainter<span class=\"token punctuation\">,</span> QPainterPath<span class=\"token punctuation\">,</span> QPen\n<span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtWidgets <span class=\"token keyword\">import</span> QLabel<span class=\"token punctuation\">,</span> QWidget<span class=\"token punctuation\">,</span> QHBoxLayout\n\n\n__Author__ <span class=\"token operator\">=</span> <span class=\"token string\">\"By: Irony.\\\"[讽刺]\\nQQ: 892768447\\nEmail: 892768447@qq.com\"</span>\n__Copyright__ <span class=\"token operator\">=</span> <span class=\"token string\">\"Copyright (c) 2017 Irony.\\\"[讽刺]\"</span>\n__Version__ <span class=\"token operator\">=</span> <span class=\"token string\">\"Version 1.0\"</span>\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Label</span><span class=\"token punctuation\">(</span>QLabel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> antialiasing<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span>Label<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__init__<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>Antialiasing <span class=\"token operator\">=</span> antialiasing\n        self<span class=\"token punctuation\">.</span>setMaximumSize<span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>setMinimumSize<span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>radius <span class=\"token operator\">=</span> <span class=\"token number\">100</span>\n\n        <span class=\"token comment\">#####################核心实现#########################</span>\n        self<span class=\"token punctuation\">.</span>target <span class=\"token operator\">=</span> QPixmap<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 大小和控件一样</span>\n        self<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>fill<span class=\"token punctuation\">(</span>Qt<span class=\"token punctuation\">.</span>transparent<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 填充背景为透明</span>\n\n        p <span class=\"token operator\">=</span> QPixmap<span class=\"token punctuation\">(</span><span class=\"token string\">\"head.jpg\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>scaled<span class=\"token punctuation\">(</span>  <span class=\"token comment\"># 加载图片并缩放和控件一样大</span>\n            <span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span> Qt<span class=\"token punctuation\">.</span>KeepAspectRatioByExpanding<span class=\"token punctuation\">,</span> Qt<span class=\"token punctuation\">.</span>SmoothTransformation<span class=\"token punctuation\">)</span>\n\n        painter <span class=\"token operator\">=</span> QPainter<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> self<span class=\"token punctuation\">.</span>Antialiasing<span class=\"token punctuation\">:</span>\n            <span class=\"token comment\"># 抗锯齿</span>\n            painter<span class=\"token punctuation\">.</span>setRenderHint<span class=\"token punctuation\">(</span>QPainter<span class=\"token punctuation\">.</span>Antialiasing<span class=\"token punctuation\">,</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n            painter<span class=\"token punctuation\">.</span>setRenderHint<span class=\"token punctuation\">(</span>QPainter<span class=\"token punctuation\">.</span>HighQualityAntialiasing<span class=\"token punctuation\">,</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n            painter<span class=\"token punctuation\">.</span>setRenderHint<span class=\"token punctuation\">(</span>QPainter<span class=\"token punctuation\">.</span>SmoothPixmapTransform<span class=\"token punctuation\">,</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">#         painter.setPen(# 测试黑色圆圈</span>\n<span class=\"token comment\">#             QPen(Qt.black, 5, Qt.SolidLine, Qt.RoundCap, Qt.RoundJoin))</span>\n        path <span class=\"token operator\">=</span> QPainterPath<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        path<span class=\"token punctuation\">.</span>addRoundedRect<span class=\"token punctuation\">(</span>\n            <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>radius<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>radius<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">#**** 切割为圆形 ****#</span>\n        painter<span class=\"token punctuation\">.</span>setClipPath<span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#         painter.drawPath(path)  # 测试黑色圆圈</span>\n\n        painter<span class=\"token punctuation\">.</span>drawPixmap<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>setPixmap<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">#####################核心实现#########################</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Window</span><span class=\"token punctuation\">(</span>QWidget<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span>Window<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__init__<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span>\n        layout <span class=\"token operator\">=</span> QHBoxLayout<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span>\n        layout<span class=\"token punctuation\">.</span>addWidget<span class=\"token punctuation\">(</span>Label<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        layout<span class=\"token punctuation\">.</span>addWidget<span class=\"token punctuation\">(</span>Label<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> antialiasing<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>setStyleSheet<span class=\"token punctuation\">(</span><span class=\"token string\">\"background: black;\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">\"__main__\"</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">import</span> sys\n    <span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtWidgets <span class=\"token keyword\">import</span> QApplication\n    app <span class=\"token operator\">=</span> QApplication<span class=\"token punctuation\">(</span>sys<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">)</span>\n    w <span class=\"token operator\">=</span> Window<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    w<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    sys<span class=\"token punctuation\">.</span>exit<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>exec_<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>",
            "tags": [
                "PyQt",
                "圆形",
                "图片"
            ]
        }
    ]
}