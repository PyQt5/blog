{
    "version": "https://jsonfeed.org/version/1",
    "title": "PyQt • All posts by \"无边框\" tag",
    "description": "Python PyQt PyQt6 PyQt5 PyQt4 PySide PySide2 PySide6",
    "home_page_url": "https://pyqt5.com",
    "items": [
        {
            "id": "https://pyqt5.com/shadowradius.html",
            "url": "https://pyqt5.com/shadowradius.html",
            "title": "PyQt5无边框圆角阴影",
            "date_published": "2019-04-25T16:06:26.000Z",
            "content_html": "<p>在做 PyQt 窗口开发中经常会遇到要做一些无边框不规则的窗口，可能还会带有阴影效果，这里演示做一个简单的无边框圆角的窗口，原理就在于背景窗口的透明和一层有色背景控件的叠加。</p>\n<span id=\"more\"></span>\n<h2 id=\"原理说明\"><a class=\"markdownIt-Anchor\" href=\"#原理说明\">#</a> 原理说明</h2>\n<ol>\n<li>黑色（方便说明）的 <code>QDialog</code>  或者 <code>QWidget</code>  作为全透明无边框窗口。</li>\n<li>其中白色的 <code>QWidget</code>  才是主要显示圆角和阴影的窗口，用于承载其它控件的显示。</li>\n<li>注意红色和紫色的方框内的层次。</li>\n<li>另：如果要熟悉纯代码编写请看 <a href=\"https://github.com/PyQt5/PyQt/blob/master/Demo/FramelessDialog.py\">FramelessDialog.py</a></li>\n</ol>\n<p>如图：</p>\n<p><img src=\"/PyQt/Demo/ScreenShot/FramelessDialog1.png\" alt=\"FramelessDialog1\"></p>\n<h2 id=\"代码\"><a class=\"markdownIt-Anchor\" href=\"#代码\">#</a> 代码</h2>\n<p><a href=\"https://github.com/PyQt5/PyQt/blob/master/Demo/FramelessDialog.py\">https://github.com/PyQt5/PyQt/blob/master/Demo/FramelessDialog.py</a></p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token comment\">#!/usr/bin/env python</span>\n<span class=\"token comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"token triple-quoted-string string\">\"\"\"\nCreated on 2019年4月25日\n@author: Irony\n@site: https://pyqt5.com https://github.com/892768447\n@email: 892768447@qq.com\n@file: FramelessWidget\n@description: 无边框圆角带阴影窗口 \n\"\"\"</span>\n<span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtCore <span class=\"token keyword\">import</span> Qt\n<span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtWidgets <span class=\"token keyword\">import</span> QDialog<span class=\"token punctuation\">,</span> QGraphicsDropShadowEffect\n<span class=\"token keyword\">from</span> frameless <span class=\"token keyword\">import</span> Ui_Dialog\n\n\n__Author__ <span class=\"token operator\">=</span> <span class=\"token string\">'Irony'</span>\n__Copyright__ <span class=\"token operator\">=</span> <span class=\"token string\">'Copyright (c) 2019'</span>\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Window</span><span class=\"token punctuation\">(</span>QDialog<span class=\"token punctuation\">,</span> Ui_Dialog<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span>Window<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__init__<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>mPos <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span>\n        self<span class=\"token punctuation\">.</span>setupUi<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>closeButton<span class=\"token punctuation\">.</span>clicked<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># 重点</span>\n        <span class=\"token comment\"># 无边框</span>\n        self<span class=\"token punctuation\">.</span>setWindowFlags<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>windowFlags<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span> Qt<span class=\"token punctuation\">.</span>FramelessWindowHint<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># 背景透明（就是ui中黑色背景的那个控件）</span>\n        self<span class=\"token punctuation\">.</span>setAttribute<span class=\"token punctuation\">(</span>Qt<span class=\"token punctuation\">.</span>WA_TranslucentBackground<span class=\"token punctuation\">,</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># 添加阴影</span>\n        effect <span class=\"token operator\">=</span> QGraphicsDropShadowEffect<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span>\n        effect<span class=\"token punctuation\">.</span>setBlurRadius<span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span>\n        effect<span class=\"token punctuation\">.</span>setOffset<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        effect<span class=\"token punctuation\">.</span>setColor<span class=\"token punctuation\">(</span>Qt<span class=\"token punctuation\">.</span>gray<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>setGraphicsEffect<span class=\"token punctuation\">(</span>effect<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># 加上简单的移动功能</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">mousePressEvent</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token triple-quoted-string string\">\"\"\"鼠标点击事件\"\"\"</span>\n        <span class=\"token keyword\">if</span> event<span class=\"token punctuation\">.</span>button<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> Qt<span class=\"token punctuation\">.</span>LeftButton<span class=\"token punctuation\">:</span>\n            self<span class=\"token punctuation\">.</span>mPos <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        event<span class=\"token punctuation\">.</span>accept<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">mouseReleaseEvent</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token triple-quoted-string string\">'''鼠标弹起事件'''</span>\n        self<span class=\"token punctuation\">.</span>mPos <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span>\n        event<span class=\"token punctuation\">.</span>accept<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">mouseMoveEvent</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> event<span class=\"token punctuation\">.</span>buttons<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> Qt<span class=\"token punctuation\">.</span>LeftButton <span class=\"token keyword\">and</span> self<span class=\"token punctuation\">.</span>mPos<span class=\"token punctuation\">:</span>\n            self<span class=\"token punctuation\">.</span>move<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>mapToGlobal<span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> self<span class=\"token punctuation\">.</span>mPos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        event<span class=\"token punctuation\">.</span>accept<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">import</span> sys\n    <span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtWidgets <span class=\"token keyword\">import</span> QApplication\n    app <span class=\"token operator\">=</span> QApplication<span class=\"token punctuation\">(</span>sys<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">)</span>\n    w <span class=\"token operator\">=</span> Window<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    w<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    sys<span class=\"token punctuation\">.</span>exit<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>exec_<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"效果图\"><a class=\"markdownIt-Anchor\" href=\"#效果图\">#</a> 效果图</h2>\n<p><img src=\"/PyQt/Demo/ScreenShot/FramelessDialog.png\" alt=\"FramelessDialog\"></p>\n<h2 id=\"下载\"><a class=\"markdownIt-Anchor\" href=\"#下载\">#</a> 下载</h2>\n<p><a href=\"/files/%E6%97%A0%E8%BE%B9%E6%A1%86%E5%9C%86%E8%A7%92%E9%98%B4%E5%BD%B1.zip\">无边框圆角阴影.zip</a></p>\n",
            "tags": [
                "PyQt",
                "阴影",
                "无边框",
                "圆角"
            ]
        }
    ]
}