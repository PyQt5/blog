{
    "version": "https://jsonfeed.org/version/1",
    "title": "PyQt • All posts by \"动画\" tag",
    "description": "Python PyQt PyQt6 PyQt5 PyQt4 PySide PySide2 PySide6",
    "home_page_url": "https://pyqt5.com",
    "items": [
        {
            "id": "https://pyqt5.com/flipwidgetanimation.html",
            "url": "https://pyqt5.com/flipwidgetanimation.html",
            "title": "PyQt5窗口翻转动画",
            "date_published": "2019-05-15T14:48:00.000Z",
            "content_html": "<p>QQ 的界面一直是用来模仿练习做界面的好东西，这里就有一个类似 QQ 登录界面的实现翻转效果，当然这里并没有用两个窗口去做，而是用了 <code>QStackedWidget</code>  包含两个控件做切换，同时单独使用一个窗口做动画绘制。</p>\n<span id=\"more\"></span>\n<h2 id=\"原理说明\"><a class=\"markdownIt-Anchor\" href=\"#原理说明\">#</a> 原理说明</h2>\n<ol>\n<li>用了两个 <code>QLabel</code>  来显示模拟的图片界面，并实现鼠标点击模拟真实的窗口对应位置点击</li>\n<li>用了 <code>QStackedWidget</code>  来存放上面的两个界面 <code>QLabel</code></li>\n<li>点击切换时主要是对上面的两个界面进行截图并传递给翻转动画窗口</li>\n<li>通过 <code>setWindowOpacity</code>  控制主窗口的显示隐藏（保留任务栏），当然也可以用 <code>hide</code></li>\n<li>动画窗口 <code>FlipWidget.py</code>  主要实现两张图片的翻转显示，考虑到 0-90 和 90-180 之前的情况，以及图片的缩放动画</li>\n</ol>\n<h2 id=\"核心实现\"><a class=\"markdownIt-Anchor\" href=\"#核心实现\">#</a> 核心实现</h2>\n<ol>\n<li>主要是在 <code>paintEvent</code>  方法中使用 <code>QTransform</code>  对 <code>QPainter</code>  进行圆心变换以及 <code>rotate</code>  设置翻转角度</li>\n<li>同时根据翻转的角度范围对图片进行切换和缩放</li>\n</ol>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">paintEvent</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span>FlipWidget<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>paintEvent<span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token builtin\">hasattr</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> <span class=\"token string\">'image1'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">and</span> <span class=\"token builtin\">hasattr</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> <span class=\"token string\">'image2'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">and</span> self<span class=\"token punctuation\">.</span>isVisible<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n        painter <span class=\"token operator\">=</span> QPainter<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span>\n        painter<span class=\"token punctuation\">.</span>setRenderHint<span class=\"token punctuation\">(</span>QPainter<span class=\"token punctuation\">.</span>Antialiasing<span class=\"token punctuation\">,</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n        painter<span class=\"token punctuation\">.</span>setRenderHint<span class=\"token punctuation\">(</span>QPainter<span class=\"token punctuation\">.</span>SmoothPixmapTransform<span class=\"token punctuation\">,</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># 变换</span>\n        transform <span class=\"token operator\">=</span> QTransform<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># 把圆心设置为矩形中心</span>\n        transform<span class=\"token punctuation\">.</span>translate<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">if</span> self<span class=\"token punctuation\">.</span>_angle <span class=\"token operator\">>=</span> <span class=\"token operator\">-</span><span class=\"token number\">90</span> <span class=\"token keyword\">and</span> self<span class=\"token punctuation\">.</span>_angle <span class=\"token operator\">&lt;=</span> <span class=\"token number\">90</span><span class=\"token punctuation\">:</span>\n            <span class=\"token comment\"># 当翻转角度在90范围内显示第一张图，且从大图缩放到小图的过程</span>\n            painter<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token comment\"># 设置翻转角度</span>\n            transform<span class=\"token punctuation\">.</span>rotate<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>_angle<span class=\"token punctuation\">,</span> Qt<span class=\"token punctuation\">.</span>YAxis<span class=\"token punctuation\">)</span>\n            painter<span class=\"token punctuation\">.</span>setTransform<span class=\"token punctuation\">(</span>transform<span class=\"token punctuation\">)</span>\n            <span class=\"token comment\"># 缩放图片高度</span>\n            width <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>image1<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span>\n            height <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>image1<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span>\n                         <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">-</span> <span class=\"token builtin\">abs</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>_angle <span class=\"token operator\">/</span> self<span class=\"token punctuation\">.</span>Scale<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            image <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>image1<span class=\"token punctuation\">.</span>scaled<span class=\"token punctuation\">(</span>\n                self<span class=\"token punctuation\">.</span>image1<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">,</span>\n                Qt<span class=\"token punctuation\">.</span>IgnoreAspectRatio<span class=\"token punctuation\">,</span> Qt<span class=\"token punctuation\">.</span>SmoothTransformation<span class=\"token punctuation\">)</span>\n            painter<span class=\"token punctuation\">.</span>drawPixmap<span class=\"token punctuation\">(</span>\n                QPointF<span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>width<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>height <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> image<span class=\"token punctuation\">)</span>\n            painter<span class=\"token punctuation\">.</span>restore<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n            <span class=\"token comment\"># 当翻转角度在90范围内显示第二张图，且从小图缩放到原图的过程</span>\n            painter<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">if</span> self<span class=\"token punctuation\">.</span>_angle <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n                angle <span class=\"token operator\">=</span> <span class=\"token number\">180</span> <span class=\"token operator\">+</span> self<span class=\"token punctuation\">.</span>_angle\n            <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n                angle <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>_angle <span class=\"token operator\">-</span> <span class=\"token number\">180</span>\n            <span class=\"token comment\"># 设置翻转角度， 注意这里角度有差异</span>\n            transform<span class=\"token punctuation\">.</span>rotate<span class=\"token punctuation\">(</span>angle<span class=\"token punctuation\">,</span> Qt<span class=\"token punctuation\">.</span>YAxis<span class=\"token punctuation\">)</span>\n            painter<span class=\"token punctuation\">.</span>setTransform<span class=\"token punctuation\">(</span>transform<span class=\"token punctuation\">)</span>\n            <span class=\"token comment\"># 缩放图片高度</span>\n            width <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>image2<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span>\n            height <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>image2<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span>\n                         <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">360</span> <span class=\"token operator\">-</span> <span class=\"token builtin\">abs</span><span class=\"token punctuation\">(</span>angle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> self<span class=\"token punctuation\">.</span>Scale <span class=\"token operator\">/</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            image <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>image2<span class=\"token punctuation\">.</span>scaled<span class=\"token punctuation\">(</span>\n                self<span class=\"token punctuation\">.</span>image2<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">,</span>\n                Qt<span class=\"token punctuation\">.</span>IgnoreAspectRatio<span class=\"token punctuation\">,</span> Qt<span class=\"token punctuation\">.</span>SmoothTransformation<span class=\"token punctuation\">)</span>\n            painter<span class=\"token punctuation\">.</span>drawPixmap<span class=\"token punctuation\">(</span>\n                QPointF<span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>width<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>height <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> image<span class=\"token punctuation\">)</span>\n            painter<span class=\"token punctuation\">.</span>restore<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"代码\"><a class=\"markdownIt-Anchor\" href=\"#代码\">#</a> 代码</h2>\n<p><a href=\"https://github.com/PyQt5/PyQt/blob/master/QPropertyAnimation/FlipWidgetAnimation.py\">https://github.com/PyQt5/PyQt/blob/master/QPropertyAnimation/FlipWidgetAnimation.py</a></p>\n<h2 id=\"效果图\"><a class=\"markdownIt-Anchor\" href=\"#效果图\">#</a> 效果图</h2>\n<p><img src=\"/PyQt/QPropertyAnimation/ScreenShot/FlipWidgetAnimation.gif\" alt=\"FlipWidgetAnimation\"></p>\n",
            "tags": [
                "PyQt",
                "动画",
                "翻转"
            ]
        },
        {
            "id": "https://pyqt5.com/QPropertyAnimation.html",
            "url": "https://pyqt5.com/QPropertyAnimation.html",
            "title": "PyQt属性动画(QPropertyAnimation)",
            "date_published": "2019-05-08T07:43:06.000Z",
            "content_html": "<p><code>QPropertyAnimation</code>  继承自 <code>QVariantAnimation</code> ，其作为 Qt 的属性动画用于针对控件的属性或者继承自 <code>QObject</code>  的对象中定义的属性做修改，<br>\n简单来说就是基类是 <code>QObject</code>  且定义了属性变量，就可以用 <code>QPropertyAnimation</code>  来做属性动画。同时也可以通过 <code>pyqtProperty</code>  来增加自定义属性。</p>\n<span id=\"more\"></span>\n<p>首先，通过构造函数 <code>QPropertyAnimation(QObject, Union[QByteArray, bytes, bytearray], parent: QObject = None)</code>  创建一个对象，其中</p>\n<ol>\n<li>第一个参数是动画作用的对象，也可以通过 <code>setTargetObject</code>  设置</li>\n<li>第二个参数是属性名，在 py3 中类型是 bytes，也可以通过 <code>setPropertyName</code>  设置</li>\n</ol>\n<h2 id=\"函数\"><a class=\"markdownIt-Anchor\" href=\"#函数\">#</a> 函数</h2>\n<p>一些常见的设置函数</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\"></th>\n<th style=\"text-align:left\"></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">setPropertyName</td>\n<td style=\"text-align:left\">设置属性名</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">setTargetObject</td>\n<td style=\"text-align:left\">设置动画作用对象</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">setDuration</td>\n<td style=\"text-align:left\">设置动画持续时间（毫秒）</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">setStartValue</td>\n<td style=\"text-align:left\">设置开始值</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">setEndValue</td>\n<td style=\"text-align:left\">设置结束值</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">setEasingCurve</td>\n<td style=\"text-align:left\">设置动画曲线</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">setKeyValueAt</td>\n<td style=\"text-align:left\">插入线性值</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">setLoopCount</td>\n<td style=\"text-align:left\">设置循环次数（-1 为永久）</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"示例\"><a class=\"markdownIt-Anchor\" href=\"#示例\">#</a> 示例</h2>\n<p>比如这个例子：</p>\n<ol>\n<li>修改控件的 <code>geometry</code>  大小</li>\n<li>修改自定义属性</li>\n<li>修改进度条的 value 值</li>\n</ol>\n<p><img src=\"/images/QPropertyAnimation.gif\" alt=\"QPropertyAnimation\"></p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token comment\">#!/usr/bin/env python</span>\n<span class=\"token comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"token triple-quoted-string string\">\"\"\"\nCreated on 2019年5月8日\n@author: Irony\n@site: https://pyqt5.com https://github.com/892768447\n@email: 892768447@qq.com\n@file: \n@description: \n\"\"\"</span>\n<span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtCore <span class=\"token keyword\">import</span> QPropertyAnimation<span class=\"token punctuation\">,</span> QRect<span class=\"token punctuation\">,</span> pyqtProperty<span class=\"token punctuation\">,</span> QEasingCurve\n<span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtWidgets <span class=\"token keyword\">import</span> QWidget<span class=\"token punctuation\">,</span> QPushButton<span class=\"token punctuation\">,</span> QVBoxLayout<span class=\"token punctuation\">,</span>\\\n    QLabel<span class=\"token punctuation\">,</span> QProgressBar<span class=\"token punctuation\">,</span> QSpacerItem<span class=\"token punctuation\">,</span> QSizePolicy\n\n\n__Author__ <span class=\"token operator\">=</span> <span class=\"token string\">'Irony'</span>\n__Copyright__ <span class=\"token operator\">=</span> <span class=\"token string\">'Copyright (c) 2019 Irony'</span>\n__Version__ <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span>\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Window</span><span class=\"token punctuation\">(</span>QWidget<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span>Window<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__init__<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>resize<span class=\"token punctuation\">(</span><span class=\"token number\">400</span><span class=\"token punctuation\">,</span> <span class=\"token number\">400</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>_value <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n        self<span class=\"token punctuation\">.</span>button <span class=\"token operator\">=</span> QPushButton<span class=\"token punctuation\">(</span><span class=\"token string\">'属性动画测试'</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>button<span class=\"token punctuation\">.</span>clicked<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>doStart<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>button<span class=\"token punctuation\">.</span>setGeometry<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span> <span class=\"token number\">40</span><span class=\"token punctuation\">)</span>\n\n        self<span class=\"token punctuation\">.</span>buttonc <span class=\"token operator\">=</span> QPushButton<span class=\"token punctuation\">(</span><span class=\"token string\">'自定义属性 测试'</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>buttonc<span class=\"token punctuation\">.</span>clicked<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>doStartCustom<span class=\"token punctuation\">)</span>\n\n        self<span class=\"token punctuation\">.</span>label <span class=\"token operator\">=</span> QLabel<span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span>\n\n        self<span class=\"token punctuation\">.</span>progressbar <span class=\"token operator\">=</span> QProgressBar<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>progressbar<span class=\"token punctuation\">.</span>setRange<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">99</span><span class=\"token punctuation\">)</span>\n\n        layout <span class=\"token operator\">=</span> QVBoxLayout<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span>\n        layout<span class=\"token punctuation\">.</span>addItem<span class=\"token punctuation\">(</span>QSpacerItem<span class=\"token punctuation\">(</span>\n            <span class=\"token number\">20</span><span class=\"token punctuation\">,</span> <span class=\"token number\">60</span><span class=\"token punctuation\">,</span> QSizePolicy<span class=\"token punctuation\">.</span>Fixed<span class=\"token punctuation\">,</span> QSizePolicy<span class=\"token punctuation\">.</span>Fixed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        layout<span class=\"token punctuation\">.</span>addWidget<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>buttonc<span class=\"token punctuation\">)</span>\n        layout<span class=\"token punctuation\">.</span>addWidget<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>label<span class=\"token punctuation\">)</span>\n        layout<span class=\"token punctuation\">.</span>addWidget<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>progressbar<span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># 进度条动画</span>\n        self<span class=\"token punctuation\">.</span>progressStart<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># 此处是自定义属性，并通过动画修改后，设置QLabel的值</span>\n    <span class=\"token decorator annotation punctuation\">@pyqtProperty</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">value</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>_value\n\n    <span class=\"token decorator annotation punctuation\">@value<span class=\"token punctuation\">.</span>setter</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">value</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>_value <span class=\"token operator\">=</span> v\n        self<span class=\"token punctuation\">.</span>label<span class=\"token punctuation\">.</span>setText<span class=\"token punctuation\">(</span><span class=\"token string\">'当前值：&#123;&#125;'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">doStart</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># 第一个参数是要执行的对象</span>\n        animation <span class=\"token operator\">=</span> QPropertyAnimation<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>button<span class=\"token punctuation\">,</span> <span class=\"token string\">b'geometry'</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span>\n        animation<span class=\"token punctuation\">.</span>setDuration<span class=\"token punctuation\">(</span><span class=\"token number\">2000</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 持续时间</span>\n        <span class=\"token comment\"># 缓和曲线风格,加了曲线动画会很大程度影响</span>\n        animation<span class=\"token punctuation\">.</span>setEasingCurve<span class=\"token punctuation\">(</span>QEasingCurve<span class=\"token punctuation\">.</span>OutBounce<span class=\"token punctuation\">)</span>\n        animation<span class=\"token punctuation\">.</span>setStartValue<span class=\"token punctuation\">(</span>QRect<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">40</span><span class=\"token punctuation\">,</span> <span class=\"token number\">40</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        animation<span class=\"token punctuation\">.</span>setEndValue<span class=\"token punctuation\">(</span>QRect<span class=\"token punctuation\">(</span><span class=\"token number\">250</span><span class=\"token punctuation\">,</span> <span class=\"token number\">250</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        animation<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span>animation<span class=\"token punctuation\">.</span>DeleteWhenStopped<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">doStartCustom</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># 自定义属性动画</span>\n        <span class=\"token comment\"># 由于定义的属性是在继承的QWidget, 所以第一个参数是self</span>\n        <span class=\"token comment\"># 第二个参数就是 value</span>\n        animation <span class=\"token operator\">=</span> QPropertyAnimation<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> <span class=\"token string\">b'value'</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span>\n        animation<span class=\"token punctuation\">.</span>setDuration<span class=\"token punctuation\">(</span><span class=\"token number\">2000</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 持续时间</span>\n        animation<span class=\"token punctuation\">.</span>setStartValue<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        animation<span class=\"token punctuation\">.</span>setEndValue<span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n        animation<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span>animation<span class=\"token punctuation\">.</span>DeleteWhenStopped<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">progressStart</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># 进度条动画</span>\n        <span class=\"token comment\"># 这里 value是QProgressBar自带的属性，具体可以看文档</span>\n        <span class=\"token comment\"># https://doc.qt.io/qt-5/qprogressbar.html#properties</span>\n        animation <span class=\"token operator\">=</span> QPropertyAnimation<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>progressbar<span class=\"token punctuation\">,</span> <span class=\"token string\">b'value'</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span>\n        animation<span class=\"token punctuation\">.</span>setDuration<span class=\"token punctuation\">(</span><span class=\"token number\">2000</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 持续时间</span>\n        animation<span class=\"token punctuation\">.</span>setLoopCount<span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># 这里采用插入线性值,第一个参数的范围是（0-1）</span>\n        <span class=\"token comment\"># 第二个参数的范围是进度（最小值-最大值）</span>\n        animation<span class=\"token punctuation\">.</span>setKeyValueAt<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>progressbar<span class=\"token punctuation\">.</span>minimum<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        animation<span class=\"token punctuation\">.</span>setKeyValueAt<span class=\"token punctuation\">(</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n        animation<span class=\"token punctuation\">.</span>setKeyValueAt<span class=\"token punctuation\">(</span><span class=\"token number\">0.2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span>\n        animation<span class=\"token punctuation\">.</span>setKeyValueAt<span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">60</span><span class=\"token punctuation\">)</span>\n        animation<span class=\"token punctuation\">.</span>setKeyValueAt<span class=\"token punctuation\">(</span><span class=\"token number\">0.7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">)</span>\n        animation<span class=\"token punctuation\">.</span>setKeyValueAt<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>progressbar<span class=\"token punctuation\">.</span>maximum<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        animation<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span>animation<span class=\"token punctuation\">.</span>DeleteWhenStopped<span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">import</span> sys\n    <span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtWidgets <span class=\"token keyword\">import</span> QApplication\n    app <span class=\"token operator\">=</span> QApplication<span class=\"token punctuation\">(</span>sys<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">)</span>\n    w <span class=\"token operator\">=</span> Window<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    w<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    sys<span class=\"token punctuation\">.</span>exit<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>exec_<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>",
            "tags": [
                "PyQt",
                "动画"
            ]
        },
        {
            "id": "https://pyqt5.com/pageswitching.html",
            "url": "https://pyqt5.com/pageswitching.html",
            "title": "PyQt5之图片轮播",
            "date_published": "2018-11-24T13:45:06.000Z",
            "content_html": "<p>之前看到了 <code>QStackedWidget</code>  做切换动画，让界面不那么生硬，于是参考了 <a href=\"http://qt.shoutwiki.com/wiki/Extending_QStackedWidget_for_sliding_page_animations_in_Qt\">http://qt.shoutwiki.com/wiki/Extending_QStackedWidget_for_sliding_page_animations_in_Qt</a> 做了一个 <code>QStackedWidget</code>  的切换动画，然后利用 <code>QStackedWidget</code>  结合多个 <code>QLabel</code>  显示图片来做一个轮播效果。</p>\n<p>其实在写之前也在网上找了很多例子，参看过后发现大多例子都是利用到了 <code>paintEvent</code>  去绘制，这样其实还是比较麻烦，个人觉得更好的方式是使用 <code>QPropertyAnimation</code>  属性动画修改控件中 <code>QLabel</code>  图片控件的 pos 位置属性就可以达到移动效果了。</p>\n<span id=\"more\"></span>\n<ol>\n<li>比较核心的算法就是要计算当前页面和下一个页面的位置偏移量，比如:</li>\n</ol>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token comment\"># 计算偏移量</span>\noffsetX <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>frameRect<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\noffsetY <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>frameRect<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nw_next<span class=\"token punctuation\">.</span>setGeometry<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> offsetX<span class=\"token punctuation\">,</span> offsetY<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> direction <span class=\"token operator\">==</span> self<span class=\"token punctuation\">.</span>BOTTOM2TOP<span class=\"token punctuation\">:</span>\n    offsetX <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    offsetY <span class=\"token operator\">=</span> <span class=\"token operator\">-</span>offsetY\n<span class=\"token keyword\">elif</span> direction <span class=\"token operator\">==</span> self<span class=\"token punctuation\">.</span>TOP2BOTTOM<span class=\"token punctuation\">:</span>\n    offsetX <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n<span class=\"token keyword\">elif</span> direction <span class=\"token operator\">==</span> self<span class=\"token punctuation\">.</span>RIGHT2LEFT<span class=\"token punctuation\">:</span>\n    offsetX <span class=\"token operator\">=</span> <span class=\"token operator\">-</span>offsetX\n    offsetY <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n<span class=\"token keyword\">elif</span> direction <span class=\"token operator\">==</span> self<span class=\"token punctuation\">.</span>LEFT2RIGHT<span class=\"token punctuation\">:</span>\n    offsetY <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n\n<span class=\"token comment\"># 重新定位显示区域外部/旁边的下一个窗口小部件</span>\npnext <span class=\"token operator\">=</span> w_next<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\npnow <span class=\"token operator\">=</span> w_now<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nself<span class=\"token punctuation\">.</span>_pnow <span class=\"token operator\">=</span> pnow\n\n<span class=\"token comment\"># 移动到指定位置并显示</span>\nw_next<span class=\"token punctuation\">.</span>move<span class=\"token punctuation\">(</span>pnext<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> offsetX<span class=\"token punctuation\">,</span> pnext<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> offsetY<span class=\"token punctuation\">)</span>\nw_next<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nw_next<span class=\"token punctuation\">.</span>raise_<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<ol start=\"2\">\n<li>\n<p>其次是对这两个页面增加关联 <code>pos</code>  属性的 <code>QPropertyAnimation</code>  动画，然后加入到并行动画组 <code>QParallelAnimationGroup</code>  中再启动即可。</p>\n</li>\n<li>\n<p>对 <code>QStackedWidget</code>  的 <code>setCurrentIndex</code>  和 <code>setCurrentWidget</code>  这两个函数进行了覆盖重写达到及时手动调用这两个函数也会产生动画效果的目的。</p>\n</li>\n</ol>\n<h2 id=\"代码\"><a class=\"markdownIt-Anchor\" href=\"#代码\">#</a> 代码</h2>\n<p><a href=\"https://github.com/PyQt5/PyQt/blob/master/QPropertyAnimation/PageSwitching.py\">https://github.com/PyQt5/PyQt/blob/master/QPropertyAnimation/PageSwitching.py</a></p>\n<h2 id=\"效果图\"><a class=\"markdownIt-Anchor\" href=\"#效果图\">#</a> 效果图</h2>\n<p><img src=\"/PyQt/QPropertyAnimation/ScreenShot/PageSwitching.gif\" alt=\"PageSwitching\"></p>\n",
            "tags": [
                "PyQt",
                "动画",
                "轮播"
            ]
        },
        {
            "id": "https://pyqt5.com/rlatticeeffect.html",
            "url": "https://pyqt5.com/rlatticeeffect.html",
            "title": "PyQt5仿网页鼠标移动点阵特效",
            "date_published": "2018-10-29T08:49:10.000Z",
            "content_html": "<p>Orz，前段时间有个 zz 需求，就是要做一个类似网页上很多个多点连线、鼠标移动跟随的那种炫酷特效，然后花了点时间在网上找了 js 做的，刚开始打算是嵌入 <code>QWebView</code>  来显示网页，后来研究了下 js 的算法代码，遂改用 <code>QWidget</code>  的 <code>paintEvent</code>  直接绘制。</p>\n<span id=\"more\"></span>\n<h2 id=\"大概思路\"><a class=\"markdownIt-Anchor\" href=\"#大概思路\">#</a> 大概思路</h2>\n<ol>\n<li>先根据窗口大小随机创建一些点</li>\n<li>遍历这些点并找到与之相关联的点</li>\n<li>在动画过程中绘制圆点和画两点之间的连线</li>\n<li>属性动画 <code>QPropertyAnimation</code>  改变颜色的透明度</li>\n</ol>\n<h2 id=\"题外\"><a class=\"markdownIt-Anchor\" href=\"#题外\">#</a> 题外</h2>\n<ol>\n<li>这里没有仔细去研究 js 里的算法优化，在浏览器里嗖嗖的就生成了，在 py 里好慢…</li>\n<li>尽量在 py 里优化了循环操作，也简单的做了个 cython 加速也才提高了 1s ? 1 倍？..</li>\n<li>不要只是为了好看用这玩意儿，和网页的效果一样，占 CPU !!! 没有任何意义</li>\n<li>如果有更好的优化算法请告知，3Q</li>\n<li>pyd 是 python3.4 生成的，删掉 pyd 也能运行</li>\n</ol>\n<h2 id=\"代码\"><a class=\"markdownIt-Anchor\" href=\"#代码\">#</a> 代码</h2>\n<p><a href=\"https://github.com/PyQt5/PyQt/blob/master/QPropertyAnimation/RlatticeEffect.py\">https://github.com/PyQt5/PyQt/blob/master/QPropertyAnimation/RlatticeEffect.py</a></p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token comment\">#!/usr/bin/env python</span>\n<span class=\"token comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"token triple-quoted-string string\">\"\"\"\nCreated on 2018年11月22日\n@author: Irony\n@site: https://pyqt5.com, https://github.com/892768447\n@email: 892768447@qq.com\n@file: \n@description: \n\"\"\"</span>\n<span class=\"token keyword\">from</span> random <span class=\"token keyword\">import</span> random\n<span class=\"token keyword\">from</span> time <span class=\"token keyword\">import</span> time\n\n<span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtCore <span class=\"token keyword\">import</span> QPropertyAnimation<span class=\"token punctuation\">,</span> QObject<span class=\"token punctuation\">,</span> pyqtProperty<span class=\"token punctuation\">,</span> QEasingCurve<span class=\"token punctuation\">,</span>\\\n    Qt<span class=\"token punctuation\">,</span> QRectF<span class=\"token punctuation\">,</span> pyqtSignal\n<span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtGui <span class=\"token keyword\">import</span> QColor<span class=\"token punctuation\">,</span> QPainterPath<span class=\"token punctuation\">,</span> QPainter\n<span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtWidgets <span class=\"token keyword\">import</span> QWidget\n\n\n__Author__ <span class=\"token operator\">=</span> <span class=\"token triple-quoted-string string\">\"\"\"By: Irony\nQQ: 892768447\nEmail: 892768447@qq.com\"\"\"</span>\n__Copyright__ <span class=\"token operator\">=</span> <span class=\"token string\">'Copyright (c) 2018 Irony'</span>\n__Version__ <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span>\n\n\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">import</span> pointtool  <span class=\"token comment\"># @UnusedImport @UnresolvedImport</span>\n    getDistance <span class=\"token operator\">=</span> pointtool<span class=\"token punctuation\">.</span>getDistance\n    findClose <span class=\"token operator\">=</span> pointtool<span class=\"token punctuation\">.</span>findClose\n<span class=\"token keyword\">except</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">import</span> math\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">getDistance</span><span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">,</span> p2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> math<span class=\"token punctuation\">.</span><span class=\"token builtin\">pow</span><span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">.</span>x <span class=\"token operator\">-</span> p2<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> math<span class=\"token punctuation\">.</span><span class=\"token builtin\">pow</span><span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> p2<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">findClose</span><span class=\"token punctuation\">(</span>points<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        plen <span class=\"token operator\">=</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>points<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>plen<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            closest <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">]</span>\n            p1 <span class=\"token operator\">=</span> points<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span>\n            <span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>plen<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                p2 <span class=\"token operator\">=</span> points<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span>\n                dte1 <span class=\"token operator\">=</span> getDistance<span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">,</span> p2<span class=\"token punctuation\">)</span>\n                <span class=\"token keyword\">if</span> p1 <span class=\"token operator\">!=</span> p2<span class=\"token punctuation\">:</span>\n                    placed <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span>\n                    <span class=\"token keyword\">for</span> k <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                        <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> placed<span class=\"token punctuation\">:</span>\n                            <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> closest<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n                                closest<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> p2\n                                placed <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span>\n                    <span class=\"token keyword\">for</span> k <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                        <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> placed<span class=\"token punctuation\">:</span>\n                            <span class=\"token keyword\">if</span> dte1 <span class=\"token operator\">&lt;</span> getDistance<span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">,</span> closest<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                                closest<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> p2\n                                placed <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span>\n            p1<span class=\"token punctuation\">.</span>closest <span class=\"token operator\">=</span> closest\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Target</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> x\n        self<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> y\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Point</span><span class=\"token punctuation\">(</span>QObject<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    valueChanged <span class=\"token operator\">=</span> pyqtSignal<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> ox<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> oy<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span>Point<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__init__<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>__x <span class=\"token operator\">=</span> x\n        self<span class=\"token punctuation\">.</span>_x <span class=\"token operator\">=</span> x\n        self<span class=\"token punctuation\">.</span>originX <span class=\"token operator\">=</span> ox\n        self<span class=\"token punctuation\">.</span>_y <span class=\"token operator\">=</span> y\n        self<span class=\"token punctuation\">.</span>__y <span class=\"token operator\">=</span> y\n        self<span class=\"token punctuation\">.</span>originY <span class=\"token operator\">=</span> oy\n        <span class=\"token comment\"># 5个闭合点</span>\n        self<span class=\"token punctuation\">.</span>closest <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n        <span class=\"token comment\"># 圆半径</span>\n        self<span class=\"token punctuation\">.</span>radius <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> random<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span>\n        <span class=\"token comment\"># 连线颜色</span>\n        self<span class=\"token punctuation\">.</span>lineColor <span class=\"token operator\">=</span> QColor<span class=\"token punctuation\">(</span><span class=\"token number\">156</span><span class=\"token punctuation\">,</span> <span class=\"token number\">217</span><span class=\"token punctuation\">,</span> <span class=\"token number\">249</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># 圆颜色</span>\n        self<span class=\"token punctuation\">.</span>circleColor <span class=\"token operator\">=</span> QColor<span class=\"token punctuation\">(</span><span class=\"token number\">156</span><span class=\"token punctuation\">,</span> <span class=\"token number\">217</span><span class=\"token punctuation\">,</span> <span class=\"token number\">249</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">initAnimation</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># 属性动画</span>\n        <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> <span class=\"token builtin\">hasattr</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> <span class=\"token string\">'xanimation'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            self<span class=\"token punctuation\">.</span>xanimation <span class=\"token operator\">=</span> QPropertyAnimation<span class=\"token punctuation\">(</span>\n                self<span class=\"token punctuation\">,</span> <span class=\"token string\">b'x'</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">,</span> valueChanged<span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>valueChanged<span class=\"token punctuation\">.</span>emit<span class=\"token punctuation\">,</span>\n                easingCurve<span class=\"token operator\">=</span>QEasingCurve<span class=\"token punctuation\">.</span>InOutSine<span class=\"token punctuation\">)</span>\n            self<span class=\"token punctuation\">.</span>yanimation <span class=\"token operator\">=</span> QPropertyAnimation<span class=\"token punctuation\">(</span>\n                self<span class=\"token punctuation\">,</span> <span class=\"token string\">b'y'</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">,</span> valueChanged<span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>valueChanged<span class=\"token punctuation\">.</span>emit<span class=\"token punctuation\">,</span>\n                easingCurve<span class=\"token operator\">=</span>QEasingCurve<span class=\"token punctuation\">.</span>InOutSine<span class=\"token punctuation\">,</span>\n                finished<span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>updateAnimation<span class=\"token punctuation\">)</span>\n            self<span class=\"token punctuation\">.</span>updateAnimation<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">updateAnimation</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>xanimation<span class=\"token punctuation\">.</span>stop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>yanimation<span class=\"token punctuation\">.</span>stop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        duration <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">+</span> random<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span>\n        self<span class=\"token punctuation\">.</span>xanimation<span class=\"token punctuation\">.</span>setDuration<span class=\"token punctuation\">(</span>duration<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>yanimation<span class=\"token punctuation\">.</span>setDuration<span class=\"token punctuation\">(</span>duration<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>xanimation<span class=\"token punctuation\">.</span>setStartValue<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>__x<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>xanimation<span class=\"token punctuation\">.</span>setEndValue<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>originX <span class=\"token operator\">-</span> <span class=\"token number\">50</span> <span class=\"token operator\">+</span> random<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>yanimation<span class=\"token punctuation\">.</span>setStartValue<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>__y<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>yanimation<span class=\"token punctuation\">.</span>setEndValue<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>originY <span class=\"token operator\">-</span> <span class=\"token number\">50</span> <span class=\"token operator\">+</span> random<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>xanimation<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>yanimation<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token decorator annotation punctuation\">@pyqtProperty</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">float</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">x</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>_x\n\n    <span class=\"token decorator annotation punctuation\">@x<span class=\"token punctuation\">.</span>setter</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">x</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>_x <span class=\"token operator\">=</span> x\n\n    <span class=\"token decorator annotation punctuation\">@pyqtProperty</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">float</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">y</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>_y\n\n    <span class=\"token decorator annotation punctuation\">@y<span class=\"token punctuation\">.</span>setter</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">y</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>_y <span class=\"token operator\">=</span> y\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Window</span><span class=\"token punctuation\">(</span>QWidget<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span>Window<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__init__<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>setMouseTracking<span class=\"token punctuation\">(</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>resize<span class=\"token punctuation\">(</span><span class=\"token number\">800</span><span class=\"token punctuation\">,</span> <span class=\"token number\">600</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>points <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n        self<span class=\"token punctuation\">.</span>target <span class=\"token operator\">=</span> Target<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>initPoints<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">paintEvent</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span>Window<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>paintEvent<span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span>\n        painter <span class=\"token operator\">=</span> QPainter<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        painter<span class=\"token punctuation\">.</span>begin<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span>\n        painter<span class=\"token punctuation\">.</span>setRenderHint<span class=\"token punctuation\">(</span>QPainter<span class=\"token punctuation\">.</span>Antialiasing<span class=\"token punctuation\">)</span>\n        painter<span class=\"token punctuation\">.</span>fillRect<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> Qt<span class=\"token punctuation\">.</span>black<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>animate<span class=\"token punctuation\">(</span>painter<span class=\"token punctuation\">)</span>\n        painter<span class=\"token punctuation\">.</span>end<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">mouseMoveEvent</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span>Window<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>mouseMoveEvent<span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># 鼠标移动时更新xy坐标</span>\n        self<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">initPoints</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        t <span class=\"token operator\">=</span> time<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>points<span class=\"token punctuation\">.</span>clear<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># 创建点</span>\n        stepX <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">20</span>\n        stepY <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">20</span>\n        <span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>stepX<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">for</span> y <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>stepY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                ox <span class=\"token operator\">=</span> x <span class=\"token operator\">+</span> random<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> stepX\n                oy <span class=\"token operator\">=</span> y <span class=\"token operator\">+</span> random<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> stepY\n                point <span class=\"token operator\">=</span> Point<span class=\"token punctuation\">(</span>ox<span class=\"token punctuation\">,</span> ox<span class=\"token punctuation\">,</span> oy<span class=\"token punctuation\">,</span> oy<span class=\"token punctuation\">)</span>\n                point<span class=\"token punctuation\">.</span>valueChanged<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">)</span>\n                self<span class=\"token punctuation\">.</span>points<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>point<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>time<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> t<span class=\"token punctuation\">)</span>\n\n        t <span class=\"token operator\">=</span> time<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># 每个点寻找5个闭合点</span>\n        findClose<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>points<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>time<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> t<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">animate</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> painter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">for</span> p <span class=\"token keyword\">in</span> self<span class=\"token punctuation\">.</span>points<span class=\"token punctuation\">:</span>\n            <span class=\"token comment\"># 检测点的范围</span>\n            value <span class=\"token operator\">=</span> <span class=\"token builtin\">abs</span><span class=\"token punctuation\">(</span>getDistance<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">if</span> value <span class=\"token operator\">&lt;</span> <span class=\"token number\">4000</span><span class=\"token punctuation\">:</span>\n                <span class=\"token comment\"># 其实就是修改颜色透明度</span>\n                p<span class=\"token punctuation\">.</span>lineColor<span class=\"token punctuation\">.</span>setAlphaF<span class=\"token punctuation\">(</span><span class=\"token number\">0.3</span><span class=\"token punctuation\">)</span>\n                p<span class=\"token punctuation\">.</span>circleColor<span class=\"token punctuation\">.</span>setAlphaF<span class=\"token punctuation\">(</span><span class=\"token number\">0.6</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">elif</span> value <span class=\"token operator\">&lt;</span> <span class=\"token number\">20000</span><span class=\"token punctuation\">:</span>\n                p<span class=\"token punctuation\">.</span>lineColor<span class=\"token punctuation\">.</span>setAlphaF<span class=\"token punctuation\">(</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">)</span>\n                p<span class=\"token punctuation\">.</span>circleColor<span class=\"token punctuation\">.</span>setAlphaF<span class=\"token punctuation\">(</span><span class=\"token number\">0.3</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">elif</span> value <span class=\"token operator\">&lt;</span> <span class=\"token number\">40000</span><span class=\"token punctuation\">:</span>\n                p<span class=\"token punctuation\">.</span>lineColor<span class=\"token punctuation\">.</span>setAlphaF<span class=\"token punctuation\">(</span><span class=\"token number\">0.02</span><span class=\"token punctuation\">)</span>\n                p<span class=\"token punctuation\">.</span>circleColor<span class=\"token punctuation\">.</span>setAlphaF<span class=\"token punctuation\">(</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n                p<span class=\"token punctuation\">.</span>lineColor<span class=\"token punctuation\">.</span>setAlphaF<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n                p<span class=\"token punctuation\">.</span>circleColor<span class=\"token punctuation\">.</span>setAlphaF<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token comment\"># 画线条</span>\n            <span class=\"token keyword\">if</span> p<span class=\"token punctuation\">.</span>lineColor<span class=\"token punctuation\">.</span>alpha<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                <span class=\"token keyword\">for</span> pc <span class=\"token keyword\">in</span> p<span class=\"token punctuation\">.</span>closest<span class=\"token punctuation\">:</span>\n                    <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> pc<span class=\"token punctuation\">:</span>\n                        <span class=\"token keyword\">continue</span>\n                    path <span class=\"token operator\">=</span> QPainterPath<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                    path<span class=\"token punctuation\">.</span>moveTo<span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span>\n                    path<span class=\"token punctuation\">.</span>lineTo<span class=\"token punctuation\">(</span>pc<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> pc<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span>\n                    painter<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                    painter<span class=\"token punctuation\">.</span>setPen<span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>lineColor<span class=\"token punctuation\">)</span>\n                    painter<span class=\"token punctuation\">.</span>drawPath<span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span>\n                    painter<span class=\"token punctuation\">.</span>restore<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token comment\"># 画圆</span>\n            painter<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            painter<span class=\"token punctuation\">.</span>setPen<span class=\"token punctuation\">(</span>Qt<span class=\"token punctuation\">.</span>NoPen<span class=\"token punctuation\">)</span>\n            painter<span class=\"token punctuation\">.</span>setBrush<span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>circleColor<span class=\"token punctuation\">)</span>\n            painter<span class=\"token punctuation\">.</span>drawRoundedRect<span class=\"token punctuation\">(</span>QRectF<span class=\"token punctuation\">(</span>\n                p<span class=\"token punctuation\">.</span>x <span class=\"token operator\">-</span> p<span class=\"token punctuation\">.</span>radius<span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> p<span class=\"token punctuation\">.</span>radius<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> p<span class=\"token punctuation\">.</span>radius<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> p<span class=\"token punctuation\">.</span>radius<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">.</span>radius<span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">.</span>radius<span class=\"token punctuation\">)</span>\n            painter<span class=\"token punctuation\">.</span>restore<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token comment\"># 开启动画</span>\n            p<span class=\"token punctuation\">.</span>initAnimation<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">import</span> sys\n    <span class=\"token keyword\">import</span> cgitb\n    sys<span class=\"token punctuation\">.</span>excepthook <span class=\"token operator\">=</span> cgitb<span class=\"token punctuation\">.</span>enable<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtWidgets <span class=\"token keyword\">import</span> QApplication\n    app <span class=\"token operator\">=</span> QApplication<span class=\"token punctuation\">(</span>sys<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">)</span>\n    w <span class=\"token operator\">=</span> Window<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    w<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    sys<span class=\"token punctuation\">.</span>exit<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>exec_<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"效果图\"><a class=\"markdownIt-Anchor\" href=\"#效果图\">#</a> 效果图</h2>\n<p><img src=\"/PyQt/QPropertyAnimation/ScreenShot/RlatticeEffect.gif\" alt=\"RlatticeEffect\"></p>\n",
            "tags": [
                "PyQt",
                "动画",
                "特效"
            ]
        },
        {
            "id": "https://pyqt5.com/animateshadow.html",
            "url": "https://pyqt5.com/animateshadow.html",
            "title": "PyQt5动画边框阴影",
            "date_published": "2018-09-25T15:38:12.000Z",
            "content_html": "<p>为子控件增加动画阴影效果，结合 <code>QGraphicsDropShadowEffect</code>  和 <code>QPropertyAnimation</code>  动态改变阴影半径达到效果，在旧版本的 Qt 中 <code>QGraphicsDropShadowEffect</code>  可能会有点问题（父控件会影响子控件）</p>\n<span id=\"more\"></span>\n<h2 id=\"原理\"><a class=\"markdownIt-Anchor\" href=\"#原理\">#</a> 原理</h2>\n<p>原理是利用 QGraphicsDropShadowEffect 添加边框阴影，然后使用动画不停改变阴影的模糊半径来达到效果，如图：</p>\n<p><img src=\"/PyQt/QGraphicsDropShadowEffect/ScreenShot/ShadowEffect.gif\" alt=\"ShadowEffect\"></p>\n<h2 id=\"简单说明\"><a class=\"markdownIt-Anchor\" href=\"#简单说明\">#</a> 简单说明</h2>\n<ol>\n<li>继承 <code>QGraphicsDropShadowEffect</code>  增加动态属性 <code>radius</code></li>\n<li>通过 <code>setGraphicsEffect</code>  方法设置控件的边框阴影</li>\n<li>通过 <code>QPropertyAnimation</code>  属性动画不断改变 <code>radius</code>  的值并调用 <code>setBlurRadius</code>  更新半径值</li>\n</ol>\n<p><a href=\"https://github.com/PyQt5/PyQt/blob/master/QGraphicsDropShadowEffect/ShadowEffect.py\">https://github.com/PyQt5/PyQt/blob/master/QGraphicsDropShadowEffect/ShadowEffect.py</a></p>\n<h2 id=\"自定义类\"><a class=\"markdownIt-Anchor\" href=\"#自定义类\">#</a> 自定义类</h2>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token comment\">#!/usr/bin/env python</span>\n<span class=\"token comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"token triple-quoted-string string\">\"\"\"\nCreated on 2018年9月25日\n@author: Irony\n@site: https://pyqt5.com, https://github.com/892768447\n@email: 892768447@qq.com\n@file: AnimationShadowEffect\n@description: 边框动画阴影动画\n\"\"\"</span>\n<span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtCore <span class=\"token keyword\">import</span> QPropertyAnimation<span class=\"token punctuation\">,</span> pyqtProperty\n<span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtWidgets <span class=\"token keyword\">import</span> QGraphicsDropShadowEffect\n\n\n__Author__ <span class=\"token operator\">=</span> <span class=\"token triple-quoted-string string\">\"\"\"By: Irony\nQQ: 892768447\nEmail: 892768447@qq.com\"\"\"</span>\n__Copyright__ <span class=\"token operator\">=</span> <span class=\"token string\">'Copyright (c) 2018 Irony'</span>\n__Version__ <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span>\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">AnimationShadowEffect</span><span class=\"token punctuation\">(</span>QGraphicsDropShadowEffect<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> color<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span>AnimationShadowEffect<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__init__<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>setColor<span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>setOffset<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>setBlurRadius<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>_radius <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n        self<span class=\"token punctuation\">.</span>animation <span class=\"token operator\">=</span> QPropertyAnimation<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>animation<span class=\"token punctuation\">.</span>setTargetObject<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>animation<span class=\"token punctuation\">.</span>setDuration<span class=\"token punctuation\">(</span><span class=\"token number\">2000</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 一次循环时间</span>\n        self<span class=\"token punctuation\">.</span>animation<span class=\"token punctuation\">.</span>setLoopCount<span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 永久循环</span>\n        self<span class=\"token punctuation\">.</span>animation<span class=\"token punctuation\">.</span>setPropertyName<span class=\"token punctuation\">(</span><span class=\"token string\">b'radius'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># 插入线行值</span>\n        self<span class=\"token punctuation\">.</span>animation<span class=\"token punctuation\">.</span>setKeyValueAt<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>animation<span class=\"token punctuation\">.</span>setKeyValueAt<span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>animation<span class=\"token punctuation\">.</span>setKeyValueAt<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">start</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>animation<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token decorator annotation punctuation\">@pyqtProperty</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">radius</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>_radius\n\n    <span class=\"token decorator annotation punctuation\">@radius<span class=\"token punctuation\">.</span>setter</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">radius</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>_radius <span class=\"token operator\">=</span> r\n        self<span class=\"token punctuation\">.</span>setBlurRadius<span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"测试代码\"><a class=\"markdownIt-Anchor\" href=\"#测试代码\">#</a> 测试代码</h2>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token comment\">#!/usr/bin/env python</span>\n<span class=\"token comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"token triple-quoted-string string\">\"\"\"\nCreated on 2018年9月25日\n@author: Irony\n@site: https://pyqt5.com, https://github.com/892768447\n@email: 892768447@qq.com\n@file: Test\n@description: \n\"\"\"</span>\n<span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtCore <span class=\"token keyword\">import</span> Qt\n<span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtGui <span class=\"token keyword\">import</span> QPixmap\n<span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtWidgets <span class=\"token keyword\">import</span> QWidget<span class=\"token punctuation\">,</span> QHBoxLayout<span class=\"token punctuation\">,</span> QLabel<span class=\"token punctuation\">,</span> QPushButton<span class=\"token punctuation\">,</span> QLineEdit\n\n<span class=\"token keyword\">from</span> AnimationShadowEffect <span class=\"token keyword\">import</span> AnimationShadowEffect  <span class=\"token comment\"># @UnresolvedImport</span>\n\n\n__Author__ <span class=\"token operator\">=</span> <span class=\"token triple-quoted-string string\">\"\"\"By: Irony\nQQ: 892768447\nEmail: 892768447@qq.com\"\"\"</span>\n__Copyright__ <span class=\"token operator\">=</span> <span class=\"token string\">'Copyright (c) 2018 Irony'</span>\n__Version__ <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span>\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Window</span><span class=\"token punctuation\">(</span>QWidget<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span>Window<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__init__<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span>\n        layout <span class=\"token operator\">=</span> QHBoxLayout<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># 绿色边框</span>\n        labelGreen <span class=\"token operator\">=</span> QLabel<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> pixmap<span class=\"token operator\">=</span>QPixmap<span class=\"token punctuation\">(</span><span class=\"token string\">'1.jpg'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>scaled<span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        layout<span class=\"token punctuation\">.</span>addWidget<span class=\"token punctuation\">(</span>labelGreen<span class=\"token punctuation\">)</span>\n        aniGreen <span class=\"token operator\">=</span> AnimationShadowEffect<span class=\"token punctuation\">(</span>Qt<span class=\"token punctuation\">.</span>darkGreen<span class=\"token punctuation\">,</span> labelGreen<span class=\"token punctuation\">)</span>\n        labelGreen<span class=\"token punctuation\">.</span>setGraphicsEffect<span class=\"token punctuation\">(</span>aniGreen<span class=\"token punctuation\">)</span>\n        aniGreen<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># 红色边框,圆形图片</span>\n        labelRed <span class=\"token operator\">=</span> QLabel<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span>\n        labelRed<span class=\"token punctuation\">.</span>setMinimumSize<span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n        labelRed<span class=\"token punctuation\">.</span>setMaximumSize<span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n        labelRed<span class=\"token punctuation\">.</span>setStyleSheet<span class=\"token punctuation\">(</span><span class=\"token string\">'border-image: url(1.jpg);border-radius: 50px;'</span><span class=\"token punctuation\">)</span>\n        layout<span class=\"token punctuation\">.</span>addWidget<span class=\"token punctuation\">(</span>labelRed<span class=\"token punctuation\">)</span>\n        aniRed <span class=\"token operator\">=</span> AnimationShadowEffect<span class=\"token punctuation\">(</span>Qt<span class=\"token punctuation\">.</span>red<span class=\"token punctuation\">,</span> labelGreen<span class=\"token punctuation\">)</span>\n        labelRed<span class=\"token punctuation\">.</span>setGraphicsEffect<span class=\"token punctuation\">(</span>aniRed<span class=\"token punctuation\">)</span>\n        aniRed<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># 蓝色边框按钮</span>\n        button <span class=\"token operator\">=</span> QPushButton<span class=\"token punctuation\">(</span><span class=\"token string\">'按钮'</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span>\n        aniButton <span class=\"token operator\">=</span> AnimationShadowEffect<span class=\"token punctuation\">(</span>Qt<span class=\"token punctuation\">.</span>blue<span class=\"token punctuation\">,</span> button<span class=\"token punctuation\">)</span>\n        layout<span class=\"token punctuation\">.</span>addWidget<span class=\"token punctuation\">(</span>button<span class=\"token punctuation\">)</span>\n        button<span class=\"token punctuation\">.</span>setGraphicsEffect<span class=\"token punctuation\">(</span>aniButton<span class=\"token punctuation\">)</span>\n        aniButton<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># 青色边框输入框</span>\n        lineedit <span class=\"token operator\">=</span> QLineEdit<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span>\n        aniEdit <span class=\"token operator\">=</span> AnimationShadowEffect<span class=\"token punctuation\">(</span>Qt<span class=\"token punctuation\">.</span>cyan<span class=\"token punctuation\">,</span> lineedit<span class=\"token punctuation\">)</span>\n        layout<span class=\"token punctuation\">.</span>addWidget<span class=\"token punctuation\">(</span>lineedit<span class=\"token punctuation\">)</span>\n        lineedit<span class=\"token punctuation\">.</span>setGraphicsEffect<span class=\"token punctuation\">(</span>aniEdit<span class=\"token punctuation\">)</span>\n        aniEdit<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">import</span> sys\n    <span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtWidgets <span class=\"token keyword\">import</span> QApplication\n    app <span class=\"token operator\">=</span> QApplication<span class=\"token punctuation\">(</span>sys<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">)</span>\n    w <span class=\"token operator\">=</span> Window<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    w<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    sys<span class=\"token punctuation\">.</span>exit<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>exec_<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>",
            "tags": [
                "PyQt",
                "动画",
                "阴影"
            ]
        }
    ]
}