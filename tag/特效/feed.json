{
    "version": "https://jsonfeed.org/version/1",
    "title": "PyQt • All posts by \"特效\" tag",
    "description": "Python PyQt PyQt6 PyQt5 PyQt4 PySide PySide2 PySide6",
    "home_page_url": "https://pyqt5.com",
    "items": [
        {
            "id": "https://pyqt5.com/rlatticeeffect.html",
            "url": "https://pyqt5.com/rlatticeeffect.html",
            "title": "PyQt5仿网页鼠标移动点阵特效",
            "date_published": "2018-10-29T08:49:10.000Z",
            "content_html": "<p>Orz，前段时间有个 zz 需求，就是要做一个类似网页上很多个多点连线、鼠标移动跟随的那种炫酷特效，然后花了点时间在网上找了 js 做的，刚开始打算是嵌入 <code>QWebView</code>  来显示网页，后来研究了下 js 的算法代码，遂改用 <code>QWidget</code>  的 <code>paintEvent</code>  直接绘制。</p>\n<span id=\"more\"></span>\n<h2 id=\"大概思路\"><a class=\"markdownIt-Anchor\" href=\"#大概思路\">#</a> 大概思路</h2>\n<ol>\n<li>先根据窗口大小随机创建一些点</li>\n<li>遍历这些点并找到与之相关联的点</li>\n<li>在动画过程中绘制圆点和画两点之间的连线</li>\n<li>属性动画 <code>QPropertyAnimation</code>  改变颜色的透明度</li>\n</ol>\n<h2 id=\"题外\"><a class=\"markdownIt-Anchor\" href=\"#题外\">#</a> 题外</h2>\n<ol>\n<li>这里没有仔细去研究 js 里的算法优化，在浏览器里嗖嗖的就生成了，在 py 里好慢…</li>\n<li>尽量在 py 里优化了循环操作，也简单的做了个 cython 加速也才提高了 1s ? 1 倍？..</li>\n<li>不要只是为了好看用这玩意儿，和网页的效果一样，占 CPU !!! 没有任何意义</li>\n<li>如果有更好的优化算法请告知，3Q</li>\n<li>pyd 是 python3.4 生成的，删掉 pyd 也能运行</li>\n</ol>\n<h2 id=\"代码\"><a class=\"markdownIt-Anchor\" href=\"#代码\">#</a> 代码</h2>\n<p><a href=\"https://github.com/PyQt5/PyQt/blob/master/QPropertyAnimation/RlatticeEffect.py\">https://github.com/PyQt5/PyQt/blob/master/QPropertyAnimation/RlatticeEffect.py</a></p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token comment\">#!/usr/bin/env python</span>\n<span class=\"token comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"token triple-quoted-string string\">\"\"\"\nCreated on 2018年11月22日\n@author: Irony\n@site: https://pyqt5.com, https://github.com/892768447\n@email: 892768447@qq.com\n@file: \n@description: \n\"\"\"</span>\n<span class=\"token keyword\">from</span> random <span class=\"token keyword\">import</span> random\n<span class=\"token keyword\">from</span> time <span class=\"token keyword\">import</span> time\n\n<span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtCore <span class=\"token keyword\">import</span> QPropertyAnimation<span class=\"token punctuation\">,</span> QObject<span class=\"token punctuation\">,</span> pyqtProperty<span class=\"token punctuation\">,</span> QEasingCurve<span class=\"token punctuation\">,</span>\\\n    Qt<span class=\"token punctuation\">,</span> QRectF<span class=\"token punctuation\">,</span> pyqtSignal\n<span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtGui <span class=\"token keyword\">import</span> QColor<span class=\"token punctuation\">,</span> QPainterPath<span class=\"token punctuation\">,</span> QPainter\n<span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtWidgets <span class=\"token keyword\">import</span> QWidget\n\n\n__Author__ <span class=\"token operator\">=</span> <span class=\"token triple-quoted-string string\">\"\"\"By: Irony\nQQ: 892768447\nEmail: 892768447@qq.com\"\"\"</span>\n__Copyright__ <span class=\"token operator\">=</span> <span class=\"token string\">'Copyright (c) 2018 Irony'</span>\n__Version__ <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span>\n\n\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">import</span> pointtool  <span class=\"token comment\"># @UnusedImport @UnresolvedImport</span>\n    getDistance <span class=\"token operator\">=</span> pointtool<span class=\"token punctuation\">.</span>getDistance\n    findClose <span class=\"token operator\">=</span> pointtool<span class=\"token punctuation\">.</span>findClose\n<span class=\"token keyword\">except</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">import</span> math\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">getDistance</span><span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">,</span> p2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> math<span class=\"token punctuation\">.</span><span class=\"token builtin\">pow</span><span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">.</span>x <span class=\"token operator\">-</span> p2<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> math<span class=\"token punctuation\">.</span><span class=\"token builtin\">pow</span><span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> p2<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">findClose</span><span class=\"token punctuation\">(</span>points<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        plen <span class=\"token operator\">=</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>points<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>plen<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            closest <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">]</span>\n            p1 <span class=\"token operator\">=</span> points<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span>\n            <span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>plen<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                p2 <span class=\"token operator\">=</span> points<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span>\n                dte1 <span class=\"token operator\">=</span> getDistance<span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">,</span> p2<span class=\"token punctuation\">)</span>\n                <span class=\"token keyword\">if</span> p1 <span class=\"token operator\">!=</span> p2<span class=\"token punctuation\">:</span>\n                    placed <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span>\n                    <span class=\"token keyword\">for</span> k <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                        <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> placed<span class=\"token punctuation\">:</span>\n                            <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> closest<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n                                closest<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> p2\n                                placed <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span>\n                    <span class=\"token keyword\">for</span> k <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                        <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> placed<span class=\"token punctuation\">:</span>\n                            <span class=\"token keyword\">if</span> dte1 <span class=\"token operator\">&lt;</span> getDistance<span class=\"token punctuation\">(</span>p1<span class=\"token punctuation\">,</span> closest<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                                closest<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> p2\n                                placed <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span>\n            p1<span class=\"token punctuation\">.</span>closest <span class=\"token operator\">=</span> closest\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Target</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> x\n        self<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> y\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Point</span><span class=\"token punctuation\">(</span>QObject<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    valueChanged <span class=\"token operator\">=</span> pyqtSignal<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> ox<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> oy<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span>Point<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__init__<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>__x <span class=\"token operator\">=</span> x\n        self<span class=\"token punctuation\">.</span>_x <span class=\"token operator\">=</span> x\n        self<span class=\"token punctuation\">.</span>originX <span class=\"token operator\">=</span> ox\n        self<span class=\"token punctuation\">.</span>_y <span class=\"token operator\">=</span> y\n        self<span class=\"token punctuation\">.</span>__y <span class=\"token operator\">=</span> y\n        self<span class=\"token punctuation\">.</span>originY <span class=\"token operator\">=</span> oy\n        <span class=\"token comment\"># 5个闭合点</span>\n        self<span class=\"token punctuation\">.</span>closest <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n        <span class=\"token comment\"># 圆半径</span>\n        self<span class=\"token punctuation\">.</span>radius <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> random<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span>\n        <span class=\"token comment\"># 连线颜色</span>\n        self<span class=\"token punctuation\">.</span>lineColor <span class=\"token operator\">=</span> QColor<span class=\"token punctuation\">(</span><span class=\"token number\">156</span><span class=\"token punctuation\">,</span> <span class=\"token number\">217</span><span class=\"token punctuation\">,</span> <span class=\"token number\">249</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># 圆颜色</span>\n        self<span class=\"token punctuation\">.</span>circleColor <span class=\"token operator\">=</span> QColor<span class=\"token punctuation\">(</span><span class=\"token number\">156</span><span class=\"token punctuation\">,</span> <span class=\"token number\">217</span><span class=\"token punctuation\">,</span> <span class=\"token number\">249</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">initAnimation</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># 属性动画</span>\n        <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> <span class=\"token builtin\">hasattr</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> <span class=\"token string\">'xanimation'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            self<span class=\"token punctuation\">.</span>xanimation <span class=\"token operator\">=</span> QPropertyAnimation<span class=\"token punctuation\">(</span>\n                self<span class=\"token punctuation\">,</span> <span class=\"token string\">b'x'</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">,</span> valueChanged<span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>valueChanged<span class=\"token punctuation\">.</span>emit<span class=\"token punctuation\">,</span>\n                easingCurve<span class=\"token operator\">=</span>QEasingCurve<span class=\"token punctuation\">.</span>InOutSine<span class=\"token punctuation\">)</span>\n            self<span class=\"token punctuation\">.</span>yanimation <span class=\"token operator\">=</span> QPropertyAnimation<span class=\"token punctuation\">(</span>\n                self<span class=\"token punctuation\">,</span> <span class=\"token string\">b'y'</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">,</span> valueChanged<span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>valueChanged<span class=\"token punctuation\">.</span>emit<span class=\"token punctuation\">,</span>\n                easingCurve<span class=\"token operator\">=</span>QEasingCurve<span class=\"token punctuation\">.</span>InOutSine<span class=\"token punctuation\">,</span>\n                finished<span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>updateAnimation<span class=\"token punctuation\">)</span>\n            self<span class=\"token punctuation\">.</span>updateAnimation<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">updateAnimation</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>xanimation<span class=\"token punctuation\">.</span>stop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>yanimation<span class=\"token punctuation\">.</span>stop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        duration <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">+</span> random<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span>\n        self<span class=\"token punctuation\">.</span>xanimation<span class=\"token punctuation\">.</span>setDuration<span class=\"token punctuation\">(</span>duration<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>yanimation<span class=\"token punctuation\">.</span>setDuration<span class=\"token punctuation\">(</span>duration<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>xanimation<span class=\"token punctuation\">.</span>setStartValue<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>__x<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>xanimation<span class=\"token punctuation\">.</span>setEndValue<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>originX <span class=\"token operator\">-</span> <span class=\"token number\">50</span> <span class=\"token operator\">+</span> random<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>yanimation<span class=\"token punctuation\">.</span>setStartValue<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>__y<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>yanimation<span class=\"token punctuation\">.</span>setEndValue<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>originY <span class=\"token operator\">-</span> <span class=\"token number\">50</span> <span class=\"token operator\">+</span> random<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>xanimation<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>yanimation<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token decorator annotation punctuation\">@pyqtProperty</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">float</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">x</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>_x\n\n    <span class=\"token decorator annotation punctuation\">@x<span class=\"token punctuation\">.</span>setter</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">x</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>_x <span class=\"token operator\">=</span> x\n\n    <span class=\"token decorator annotation punctuation\">@pyqtProperty</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">float</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">y</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>_y\n\n    <span class=\"token decorator annotation punctuation\">@y<span class=\"token punctuation\">.</span>setter</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">y</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>_y <span class=\"token operator\">=</span> y\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Window</span><span class=\"token punctuation\">(</span>QWidget<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span>Window<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__init__<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>setMouseTracking<span class=\"token punctuation\">(</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>resize<span class=\"token punctuation\">(</span><span class=\"token number\">800</span><span class=\"token punctuation\">,</span> <span class=\"token number\">600</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>points <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n        self<span class=\"token punctuation\">.</span>target <span class=\"token operator\">=</span> Target<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>initPoints<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">paintEvent</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span>Window<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>paintEvent<span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span>\n        painter <span class=\"token operator\">=</span> QPainter<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        painter<span class=\"token punctuation\">.</span>begin<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span>\n        painter<span class=\"token punctuation\">.</span>setRenderHint<span class=\"token punctuation\">(</span>QPainter<span class=\"token punctuation\">.</span>Antialiasing<span class=\"token punctuation\">)</span>\n        painter<span class=\"token punctuation\">.</span>fillRect<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> Qt<span class=\"token punctuation\">.</span>black<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>animate<span class=\"token punctuation\">(</span>painter<span class=\"token punctuation\">)</span>\n        painter<span class=\"token punctuation\">.</span>end<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">mouseMoveEvent</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span>Window<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>mouseMoveEvent<span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># 鼠标移动时更新xy坐标</span>\n        self<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">initPoints</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        t <span class=\"token operator\">=</span> time<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>points<span class=\"token punctuation\">.</span>clear<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># 创建点</span>\n        stepX <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">20</span>\n        stepY <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">20</span>\n        <span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>stepX<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">for</span> y <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>stepY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                ox <span class=\"token operator\">=</span> x <span class=\"token operator\">+</span> random<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> stepX\n                oy <span class=\"token operator\">=</span> y <span class=\"token operator\">+</span> random<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> stepY\n                point <span class=\"token operator\">=</span> Point<span class=\"token punctuation\">(</span>ox<span class=\"token punctuation\">,</span> ox<span class=\"token punctuation\">,</span> oy<span class=\"token punctuation\">,</span> oy<span class=\"token punctuation\">)</span>\n                point<span class=\"token punctuation\">.</span>valueChanged<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">)</span>\n                self<span class=\"token punctuation\">.</span>points<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>point<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>time<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> t<span class=\"token punctuation\">)</span>\n\n        t <span class=\"token operator\">=</span> time<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># 每个点寻找5个闭合点</span>\n        findClose<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>points<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>time<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> t<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">animate</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> painter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">for</span> p <span class=\"token keyword\">in</span> self<span class=\"token punctuation\">.</span>points<span class=\"token punctuation\">:</span>\n            <span class=\"token comment\"># 检测点的范围</span>\n            value <span class=\"token operator\">=</span> <span class=\"token builtin\">abs</span><span class=\"token punctuation\">(</span>getDistance<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">if</span> value <span class=\"token operator\">&lt;</span> <span class=\"token number\">4000</span><span class=\"token punctuation\">:</span>\n                <span class=\"token comment\"># 其实就是修改颜色透明度</span>\n                p<span class=\"token punctuation\">.</span>lineColor<span class=\"token punctuation\">.</span>setAlphaF<span class=\"token punctuation\">(</span><span class=\"token number\">0.3</span><span class=\"token punctuation\">)</span>\n                p<span class=\"token punctuation\">.</span>circleColor<span class=\"token punctuation\">.</span>setAlphaF<span class=\"token punctuation\">(</span><span class=\"token number\">0.6</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">elif</span> value <span class=\"token operator\">&lt;</span> <span class=\"token number\">20000</span><span class=\"token punctuation\">:</span>\n                p<span class=\"token punctuation\">.</span>lineColor<span class=\"token punctuation\">.</span>setAlphaF<span class=\"token punctuation\">(</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">)</span>\n                p<span class=\"token punctuation\">.</span>circleColor<span class=\"token punctuation\">.</span>setAlphaF<span class=\"token punctuation\">(</span><span class=\"token number\">0.3</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">elif</span> value <span class=\"token operator\">&lt;</span> <span class=\"token number\">40000</span><span class=\"token punctuation\">:</span>\n                p<span class=\"token punctuation\">.</span>lineColor<span class=\"token punctuation\">.</span>setAlphaF<span class=\"token punctuation\">(</span><span class=\"token number\">0.02</span><span class=\"token punctuation\">)</span>\n                p<span class=\"token punctuation\">.</span>circleColor<span class=\"token punctuation\">.</span>setAlphaF<span class=\"token punctuation\">(</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n                p<span class=\"token punctuation\">.</span>lineColor<span class=\"token punctuation\">.</span>setAlphaF<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n                p<span class=\"token punctuation\">.</span>circleColor<span class=\"token punctuation\">.</span>setAlphaF<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token comment\"># 画线条</span>\n            <span class=\"token keyword\">if</span> p<span class=\"token punctuation\">.</span>lineColor<span class=\"token punctuation\">.</span>alpha<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                <span class=\"token keyword\">for</span> pc <span class=\"token keyword\">in</span> p<span class=\"token punctuation\">.</span>closest<span class=\"token punctuation\">:</span>\n                    <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> pc<span class=\"token punctuation\">:</span>\n                        <span class=\"token keyword\">continue</span>\n                    path <span class=\"token operator\">=</span> QPainterPath<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                    path<span class=\"token punctuation\">.</span>moveTo<span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span>\n                    path<span class=\"token punctuation\">.</span>lineTo<span class=\"token punctuation\">(</span>pc<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> pc<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span>\n                    painter<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                    painter<span class=\"token punctuation\">.</span>setPen<span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>lineColor<span class=\"token punctuation\">)</span>\n                    painter<span class=\"token punctuation\">.</span>drawPath<span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span>\n                    painter<span class=\"token punctuation\">.</span>restore<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token comment\"># 画圆</span>\n            painter<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            painter<span class=\"token punctuation\">.</span>setPen<span class=\"token punctuation\">(</span>Qt<span class=\"token punctuation\">.</span>NoPen<span class=\"token punctuation\">)</span>\n            painter<span class=\"token punctuation\">.</span>setBrush<span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span>circleColor<span class=\"token punctuation\">)</span>\n            painter<span class=\"token punctuation\">.</span>drawRoundedRect<span class=\"token punctuation\">(</span>QRectF<span class=\"token punctuation\">(</span>\n                p<span class=\"token punctuation\">.</span>x <span class=\"token operator\">-</span> p<span class=\"token punctuation\">.</span>radius<span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> p<span class=\"token punctuation\">.</span>radius<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> p<span class=\"token punctuation\">.</span>radius<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> p<span class=\"token punctuation\">.</span>radius<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">.</span>radius<span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">.</span>radius<span class=\"token punctuation\">)</span>\n            painter<span class=\"token punctuation\">.</span>restore<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token comment\"># 开启动画</span>\n            p<span class=\"token punctuation\">.</span>initAnimation<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">import</span> sys\n    <span class=\"token keyword\">import</span> cgitb\n    sys<span class=\"token punctuation\">.</span>excepthook <span class=\"token operator\">=</span> cgitb<span class=\"token punctuation\">.</span>enable<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtWidgets <span class=\"token keyword\">import</span> QApplication\n    app <span class=\"token operator\">=</span> QApplication<span class=\"token punctuation\">(</span>sys<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">)</span>\n    w <span class=\"token operator\">=</span> Window<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    w<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    sys<span class=\"token punctuation\">.</span>exit<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>exec_<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"效果图\"><a class=\"markdownIt-Anchor\" href=\"#效果图\">#</a> 效果图</h2>\n<p><img src=\"/PyQt/QPropertyAnimation/ScreenShot/RlatticeEffect.gif\" alt=\"RlatticeEffect\"></p>\n",
            "tags": [
                "PyQt",
                "动画",
                "特效"
            ]
        },
        {
            "id": "https://pyqt5.com/likehtmleffect.html",
            "url": "https://pyqt5.com/likehtmleffect.html",
            "title": "PyQt5仿网页图片鼠标移动特效",
            "date_published": "2018-10-23T09:57:03.000Z",
            "content_html": "<p>em，就是类似于那种游戏官网首页的图片，鼠标放上去后来回移动，图片的前景和背景错位移动。</p>\n<span id=\"more\"></span>\n<h2 id=\"原理分析\"><a class=\"markdownIt-Anchor\" href=\"#原理分析\">#</a> 原理分析</h2>\n<ol>\n<li>2 张一样大小的透明图片，1 张作为背景，一张作为前景（比如说人物）。</li>\n<li>当鼠标往左移动时，前景人物跟着往左移动，背景往右移动</li>\n<li>计算好偏移量（见代码中）</li>\n</ol>\n<p><a href=\"https://github.com/PyQt5/PyQt/blob/master/QLabel/ImageSlipped.py\">https://github.com/PyQt5/PyQt/blob/master/QLabel/ImageSlipped.py</a></p>\n<h2 id=\"关键代码\"><a class=\"markdownIt-Anchor\" href=\"#关键代码\">#</a> 关键代码</h2>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token comment\">#!/usr/bin/env python</span>\n<span class=\"token comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"token triple-quoted-string string\">\"\"\"\nCreated on 2018年10月18日\n@author: Irony\n@site: https://pyqt5.com https://github.com/892768447\n@email: 892768447@qq.com\n@file: ImageSlipped\n@description: \n\"\"\"</span>\n<span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtGui <span class=\"token keyword\">import</span> QPixmap<span class=\"token punctuation\">,</span> QPainter\n<span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtWidgets <span class=\"token keyword\">import</span> QWidget\n\n\n__Author__ <span class=\"token operator\">=</span> <span class=\"token triple-quoted-string string\">\"\"\"By: Irony\nQQ: 892768447\nEmail: 892768447@qq.com\"\"\"</span>\n__Copyright__ <span class=\"token operator\">=</span> <span class=\"token string\">\"Copyright (c) 2018 Irony\"</span>\n__Version__ <span class=\"token operator\">=</span> <span class=\"token string\">\"Version 1.0\"</span>\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SlippedImgWidget</span><span class=\"token punctuation\">(</span>QWidget<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> bg<span class=\"token punctuation\">,</span> fg<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span>SlippedImgWidget<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__init__<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># 开启鼠标跟踪</span>\n        self<span class=\"token punctuation\">.</span>setMouseTracking<span class=\"token punctuation\">(</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># 背景</span>\n        self<span class=\"token punctuation\">.</span>bgPixmap <span class=\"token operator\">=</span> QPixmap<span class=\"token punctuation\">(</span>bg<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># 前景</span>\n        self<span class=\"token punctuation\">.</span>pePixmap <span class=\"token operator\">=</span> QPixmap<span class=\"token punctuation\">(</span>fg<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># 最小尺寸(背景右边和下方隐藏10个像素)</span>\n        size <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>bgPixmap<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>setMinimumSize<span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>setMaximumSize<span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># 分成10份用于鼠标移动判断</span>\n        self<span class=\"token punctuation\">.</span>stepX <span class=\"token operator\">=</span> size<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">10</span>\n        self<span class=\"token punctuation\">.</span>stepY <span class=\"token operator\">=</span> size<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">10</span>\n        <span class=\"token comment\"># 偏移量</span>\n        self<span class=\"token punctuation\">.</span>_offsets <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\"># 背景(-4,-4),前景(-4,-4)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">mouseMoveEvent</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span>SlippedImgWidget<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>mouseMoveEvent<span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span>\n        pos <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>pos<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># 偏移量</span>\n        offsetX <span class=\"token operator\">=</span> <span class=\"token number\">5</span> <span class=\"token operator\">-</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>pos<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> self<span class=\"token punctuation\">.</span>stepX<span class=\"token punctuation\">)</span>\n        offsetY <span class=\"token operator\">=</span> <span class=\"token number\">5</span> <span class=\"token operator\">-</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>pos<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> self<span class=\"token punctuation\">.</span>stepY<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>_offsets<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> offsetX\n        self<span class=\"token punctuation\">.</span>_offsets<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> offsetY\n        self<span class=\"token punctuation\">.</span>_offsets<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> offsetX\n        self<span class=\"token punctuation\">.</span>_offsets<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> offsetY\n        <span class=\"token comment\"># 刷新</span>\n        self<span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">paintEvent</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span>SlippedImgWidget<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>paintEvent<span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># 绘制图形</span>\n        painter <span class=\"token operator\">=</span> QPainter<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span>\n        painter<span class=\"token punctuation\">.</span>setRenderHint<span class=\"token punctuation\">(</span>QPainter<span class=\"token punctuation\">.</span>Antialiasing<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># 左上角偏移5个像素画背景图片</span>\n        painter<span class=\"token punctuation\">.</span>drawPixmap<span class=\"token punctuation\">(</span>\n            <span class=\"token operator\">-</span><span class=\"token number\">5</span> <span class=\"token operator\">+</span> self<span class=\"token punctuation\">.</span>_offsets<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token operator\">-</span><span class=\"token number\">5</span> <span class=\"token operator\">+</span> self<span class=\"token punctuation\">.</span>_offsets<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>bgPixmap<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># 右下角偏移5个像素画前景图片</span>\n        painter<span class=\"token punctuation\">.</span>drawPixmap<span class=\"token punctuation\">(</span>\n            self<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> self<span class=\"token punctuation\">.</span>pePixmap<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">5</span> <span class=\"token operator\">-</span> self<span class=\"token punctuation\">.</span>_offsets<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            self<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> self<span class=\"token punctuation\">.</span>pePixmap<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">5</span> <span class=\"token operator\">-</span> self<span class=\"token punctuation\">.</span>_offsets<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            self<span class=\"token punctuation\">.</span>pePixmap\n        <span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">import</span> sys\n    <span class=\"token keyword\">from</span> PyQt5<span class=\"token punctuation\">.</span>QtWidgets <span class=\"token keyword\">import</span> QApplication\n    app <span class=\"token operator\">=</span> QApplication<span class=\"token punctuation\">(</span>sys<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">)</span>\n    w <span class=\"token operator\">=</span> SlippedImgWidget<span class=\"token punctuation\">(</span><span class=\"token string\">'images/bg.png'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'images/fg.png'</span><span class=\"token punctuation\">)</span>\n    w<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    sys<span class=\"token punctuation\">.</span>exit<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>exec_<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"效果图\"><a class=\"markdownIt-Anchor\" href=\"#效果图\">#</a> 效果图</h2>\n<p><img src=\"/PyQt/QLabel/ScreenShot/ImageSlipped.gif\" alt=\"ImageSlipped\"></p>\n",
            "tags": [
                "PyQt",
                "特效"
            ]
        }
    ]
}